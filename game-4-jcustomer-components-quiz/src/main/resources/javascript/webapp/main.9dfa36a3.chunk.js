(this.webpackJsonpquiz=this.webpackJsonpquiz||[]).push([[0],{180:function(e,t,n){},181:function(e,t,n){"use strict";n.r(t);var a,r,i=n(0),o=n.n(i),s=n(35),c=n.n(s),l=n(209),d=n(184),u=n(25),p=n(5),g=n.n(p),b=o.a.createContext(null),m=(n(119),n(91)),j=n(12),h=n(32),x=n(7),f=n(207),O=n(102),v=n.n(O),y=n(202),w=n(34),S=Object(m.a)(a||(a=Object(w.a)(['\n    query getConsent($workspace: Workspace!, $id: String!, $language: String!) {\n        response: jcr(workspace: $workspace) {\n            consent: nodeById(uuid: $id) {\n                id: uuid\n                identifier:name\n                title:displayName(language:$language)\n                description: property(language:$language, name:"jcr:description"){\n                    value\n                }\n                actived: property(language:$language,name:"wem:activated"){\n                    value\n                }\n            }\n        }\n    }\n']))),E=n(19),k=n(37),N=n.n(k),T=function(e){var t=e.typeIdentifier,n=e.scope,a=e.status,r=new Date,i=new Date(r);i.setFullYear(i.getFullYear()+2),console.debug("syncConsentStatus status :",a),N.a.track("modifyConsent",{consent:{typeIdentifier:t,scope:n,status:a,statusDate:r.toISOString(),revokeDate:i.toISOString()}})},I=n(68),R=n.n(I),_=n(100),D=n.n(_),A=n(205),C=n(206),q=n(212),z=n(1),L=Object(y.a)((function(e){return{granted:{display:"flex",flexWrap:"wrap",alignItems:"center",margin:0,"& svg":{marginRight:".5rem"},"& i":{flexBasis:"100%",fontSize:".85rem"}},denied:{cursor:"pointer",color:e.palette.error.main,width:"1rem",marginLeft:".5rem"}}})),$=function(e){var t=L(e),n=e.id,a=e.quizState,r=e.quizDispatch,i=a.consents.filter((function(e){return e.id===n})),s=Object(j.a)(i,1)[0],c=void 0===s?{}:s,l=o.a.useContext(b).state,p=l.jContent,m=l.cxs,h=p.gql_variables,x=p.scope,f=p.consent_status,O=Object.assign(h,{id:n}),v=Object(u.a)(S,{variables:O}),y=v.loading,w=v.error,E=v.data;if(o.a.useEffect((function(){if(!1===y&&E){var e=g()(E,"response.consent",{});r({case:"DATA_READY_CONSENT",payload:{consentData:e,scope:x,cxs:m,consent_status:f}})}}),[y,E]),y)return Object(z.jsx)("p",{children:"Loading..."});if(w)return Object(z.jsx)("p",{children:"Error :("});console.debug("*** paint consent : ",n);return Object(z.jsxs)("li",{children:[!c.granted&&Object(z.jsxs)("div",{children:[Object(z.jsx)(A.a,{"aria-label":"position",row:!0,children:Object(z.jsx)(C.a,{value:c.checked,control:Object(z.jsx)(q.a,{id:c.id}),label:c.title,labelPlacement:"end",onChange:function(e){r({case:"TOGGLE_CONSENT",payload:{id:e.target.id}})}})}),Object(z.jsx)(d.a,{className:t.granted,style:{fontSize:".85rem"},component:"i",children:c.description})]}),c.granted&&Object(z.jsxs)(d.a,{className:t.granted,component:"p",children:[Object(z.jsx)(R.a,{}),c.title,Object(z.jsx)(D.a,{className:t.denied,onClick:function(){return function(e){T({scope:x,typeIdentifier:e.identifier,status:f.DENIED}),r({case:"DENIED_CONSENT",payload:{id:e.id}})}(c)}}),Object(z.jsx)("i",{children:c.description})]})]})},F=function(e){var t=e.path,n=e.alt,a=o.a.useContext(b).state.jContent.files_endpoint;return Object(z.jsx)("img",{className:"d-block w-100",src:"".concat(a).concat(encodeURI(t)),alt:n})},U=n(101),W=n.n(U),G=Object(y.a)((function(e){return{playerWrapper:{}}})),M=function(e){var t=G(e),n=e.ownerID,a=e.videoURL,r=o.a.useContext(b).state.quiz,s=Object(i.useRef)(null),c=function(e){var t=e.status;!function(e){var t=e.content,n=e.parent,a=e.status,r=e.player;N.a.track("video",{id:t.id,type:t.type,game4Quiz:{id:t.id,type:t.type},game4Warmup:{id:n},game4Video:{duration:r.current.getDuration(),currentTime:r.current.getCurrentTime(),status:a}})}({content:{id:r.id,type:r.type},parent:n,player:s,status:t})};return Object(z.jsx)("div",{className:t.playerWrapper,children:Object(z.jsx)(W.a,{ref:s,className:"react-player",url:a,controls:!0,width:"100%",height:"100%",onStart:function(){},onPlay:function(){return c({status:"started"})},onPause:function(){return c({status:"pause"})},onEnded:function(){return c({status:"end"})}})})},B=function(e){var t=e.url,n=e.ownerID;return Object(z.jsx)(M,{videoURL:t,ownerID:n})},P=Object(m.a)(r||(r=Object(w.a)(['\n    query getWidenMedia($workspace: Workspace!, $id: String!, $language: String!) {\n        response: jcr(workspace: $workspace) {\n            media: nodeById(uuid: $id) {\n                id: uuid\n                type: primaryNodeType{\n                    value:name\n                }\n                title:displayName(language:$language)\n                imageURL: property(name:"wden:templatedUrl"){\n                    value\n                }\n                videoURL: property(name:"wden:videoStreamURL"){\n                    value\n                }\n            }\n        }\n    }\n']))),Q=function(e){return{id:g()(e,"id"),type:g()(e,"type.value"),imageURL:g()(e,"imageURL.value"),videoURL:g()(e,"videoURL.value")}},V=function(e){var t=e.uuid,n="1024",a=o.a.useContext(b).state.jContent.gql_variables,r=Object.assign(a,{id:t}),i=Object(u.a)(P,{variables:r}),s=i.loading,c=i.error,l=i.data,d=o.a.useState({}),p=Object(j.a)(d,2),m=p[0],h=p[1];return o.a.useEffect((function(){if(!1===s&&l){var e=Q(g()(l,"response.media",{}));e.imageURL=e.imageURL.replace("{size}",n).replace("{scale}","1").replace("{quality}","72"),h(e)}}),[s,l]),s?Object(z.jsx)("img",{src:"https://via.placeholder.com/".concat(n,"x768/09f/fff?text=Loading"),alt:"loading"}):c?Object(z.jsx)("p",{children:"Error :("}):Object(z.jsx)(z.Fragment,{children:m&&Object(z.jsx)("img",{className:"d-block w-100",src:m.imageURL,alt:m.title})})},H=function(e){var t=e.uuid,n=e.ownerID,a=o.a.useContext(b).state.jContent.gql_variables,r=Object.assign(a,{id:t}),i=Object(u.a)(P,{variables:r}),s=i.loading,c=i.error,l=i.data,d=o.a.useState({}),p=Object(j.a)(d,2),m=p[0],h=p[1];return o.a.useEffect((function(){if(!1===s&&l){var e=Q(g()(l,"response.media",{}));h(e)}}),[s,l]),s?Object(z.jsx)("p",{children:"Loading..."}):c?Object(z.jsx)("p",{children:"Error :("}):Object(z.jsx)(z.Fragment,{children:m.videoURL&&Object(z.jsx)(M,{videoURL:m.videoURL,ownerID:n})})},Y=function(e){var t=e.id,n=e.type,a=e.mixins,r=e.path,i=e.sourceID,s=e.alt,c=o.a.useContext(b).state.jContent,l=c.cnd_type,d=c.files_endpoint,u=Object(z.jsx)(z.Fragment,{});switch(n){case l.WIDEN_IMAGE:u=Object(z.jsx)(V,{uuid:t});break;case l.WIDEN_VIDEO:u=Object(z.jsx)(H,{uuid:t,ownerID:i});break;case l.EXT_VIDEO:u=Object(z.jsx)(B,{url:r,ownerID:i});break;case l.JNT_FILE:u=a.includes(l.IMAGE)?Object(z.jsx)(F,{path:r,alt:s}):Object(z.jsx)(B,{url:d+encodeURI(r),ownerID:i});break;default:r&&(u=Object(z.jsx)(F,{path:r,alt:s}))}return u},J=n(8),X=Object(y.a)((function(e){var t,n;return{textUppercase:{textTransform:"uppercase"},subtitle:{"&::before":{backgroundColor:e.palette.primary.main,display:"block",width:"".concat(e.spacing(3),"px"),height:"".concat(e.spacing(.25),"px"),content:'""',margin:"auto",marginTop:"".concat(e.spacing(1),"px")}},item:{display:"none",minHeight:e.geometry.item.minHeight,width:"100%",backfaceVisibility:"hidden","& img":{objectFit:"cover",position:"absolute",width:"100%",height:"100%",zIndex:-1},"&.active":{display:"flex",flexWrap:"wrap",flexDirection:"column"}},wait:{marginTop:e.spacing(3)},showOverlay:{"&::before":{position:"absolute",top:0,right:0,bottom:0,left:0,content:'""',background:"linear-gradient(90deg, ".concat(e.palette.background.overlay.start," 0, ").concat(e.palette.background.overlay.startMiddle," 30%, ").concat(e.palette.background.overlay.endMiddle," 60%, ").concat(e.palette.background.overlay.end," 100%)")}},caption:(t={width:"100%",maxWidth:e.breakpoints.values.lg,margin:"auto",flexGrow:2,paddingRight:e.geometry.caption.padding.lg,paddingLeft:e.geometry.caption.padding.lg,paddingBottom:e.geometry.caption.padding.lg},Object(E.a)(t,e.breakpoints.between("xs","sm"),{paddingRight:e.geometry.caption.padding.xs,paddingLeft:e.geometry.caption.padding.xs,paddingBottom:e.geometry.caption.padding.xs}),Object(E.a)(t,"zIndex",3),Object(E.a)(t,"textAlign","center"),Object(E.a)(t,".showResult &",{"& button":{display:"none"}}),t),captionMain:(n={},Object(E.a)(n,e.breakpoints.between("xs","sm"),{"& h3":{fontSize:"2.125rem"},"& h4":{fontSize:"1.875rem"},paddingRight:e.geometry.caption.padding.main,paddingLeft:e.geometry.caption.padding.main}),Object(E.a)(n,"& .mktoForm",{margin:"auto",color:"".concat(e.palette.text.primary," !important"),"& .mktoAsterix":{color:e.palette.primary.main},"& .mktoError":{"& .mktoErrorArrow":{background:e.palette.primary.main,borderColor:e.palette.primary.dark},"& .mktoErrorMsg":{background:e.palette.primary.main,textShadow:"unset",borderColor:e.palette.primary.dark,boxShadow:"rgba(0,0,0,0.65) 0 2px 7px, inset ".concat(e.palette.primary.dark," 0 1px 0px")}},"& .mktoRequiredField":{},"& .mktoLabel":{fontSize:e.typography.body1.fontSize,fontWeight:"400 !important",lineHeight:"1.2rem",marginBottom:"5px"},"& .mktoField":{lineHeight:"1.5rem",fontSize:e.typography.body1.fontSize,padding:"8px 3px",border:0,borderRadius:"5px"},"& .mktoButtonWrap.mktoBluePill":{"& .mktoButton":{border:0,background:e.palette.primary.main,borderRadius:"4px",color:e.palette.text.secondary,fontSize:"0.875rem",fontWeight:"500",lineHeight:1.75,padding:"6px 16px",minWidth:"64px",textTransform:"uppercase",boxShadow:"0px 3px 1px -2px rgba(0,0,0,0.2),0px 2px 2px 0px rgba(0,0,0,0.14),0px 1px 5px 0px rgba(0,0,0,0.12)",textShadow:"unset",fontFamily:e.typography.fontFamily,"&:hover":{border:0,background:e.palette.primary.dark,boxShadow:"0px 3px 1px -2px rgba(0,0,0,0.2),0px 2px 2px 0px rgba(0,0,0,0.14),0px 1px 5px 0px rgba(0,0,0,0.12)"}}}}),n)}})),K=n(41),Z=n.n(K),ee=Object(y.a)((function(e){return{indicator:{boxSizing:"content-box !important",flex:"0 1 auto",width:e.geometry.indicator.width,height:e.geometry.indicator.height,marginRight:e.geometry.indicator.spacer,marginLeft:e.geometry.indicator.spacer,textIndent:"-999px",backgroundColor:e.palette.common.white,backgroundClip:"padding-box",borderTop:"".concat(e.geometry.indicator.hitAreaHeight," solid transparent"),borderBottom:"".concat(e.geometry.indicator.hitAreaHeight," solid transparent"),opacity:".5",transition:e.transitions.create(["opacity","height"],{duration:e.transitions.duration.long,easing:e.transitions.easing.ease}),".showResult &":{backgroundColor:e.palette.grey[900]},"&.clickable":{cursor:"pointer"},"&.active":{opacity:1}}}})),te=function(e){var t=ee(e),n=o.a.useContext(b),a=n.state,r=n.dispatch,i=a.currentSlide,s=e.id,c=e.enabled,l=i===s;return Object(z.jsx)("li",{className:Object(J.a)(t.indicator,l?"active":"",c?"clickable":""),onClick:function(){c&&r({case:"SHOW_SLIDE",payload:{slide:s}})}})};function ne(e,t){var n="";t.indexOf("a")>-1&&(n+="abcdefghijklmnopqrstuvwxyz"),t.indexOf("A")>-1&&(n+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),t.indexOf("#")>-1&&(n+="0123456789"),t.indexOf("!")>-1&&(n+="~`!@#$%^&*()_+-={}[]:\";'<>?,./|\\");for(var a="",r=e;r>0;--r)a+=n[Math.floor(Math.random()*n.length)];return a}function ae(e){var t=e.state,n=e.dispatch,a=e.payload,r=t.transitionIsEnabled,i=t.transitionTimeout;r?(n({case:"TOGGLE_TRANSITION"}),setTimeout((function(){return n({case:"TOGGLE_TRANSITION"})}),i),setTimeout((function(){return n(a)}),i)):n(a)}var re=Object(y.a)((function(e){var t;return{header:(t={zIndex:2,display:"flex",flexDirection:"column",justifyContent:"center",width:"100%",padding:"".concat(e.spacing(2),"px ").concat(e.geometry.caption.padding.lg)},Object(E.a)(t,e.breakpoints.between("xs","sm"),{padding:"".concat(e.spacing(2),"px ").concat(e.geometry.caption.padding.main)}),Object(E.a)(t,".showResult &",{backgroundColor:e.palette.grey[300]}),t),headerIndicators:{display:"flex",justifyContent:"center",zIndex:1,listStyle:"none",padding:0,marginTop:0,marginBottom:"".concat(e.spacing(2),"px"),".showResult &":Object(E.a)({marginBottom:0},e.breakpoints.between("xs","sm"),{marginBottom:"".concat(e.spacing(1),"px")})},headerResult:{display:"flex",alignItems:"center",justifyContent:"space-between",height:0,width:"100%",overflow:"hidden",transition:e.transitions.create(["height"],{duration:e.transitions.duration.standard,easing:e.transitions.easing.header}),".showResult &":{height:e.geometry.header.result.height,marginBottom:"".concat(e.spacing(1),"px")}},headerText:Object(E.a)({textTransform:"capitalize",fontWeight:e.typography.fontWeightBold,color:e.palette.grey[700]},e.breakpoints.between("xs","sm"),{fontSize:"1.75rem"})}})),ie=function(e){var t=re(e),n=o.a.useContext(b),a=n.state,r=n.dispatch,i=a.jContent,s=a.slideSet,c=a.currentResult,l=a.showNext,u=a.showScore,p=a.browsingIsEnabled,g=function(){return ae({state:a,dispatch:r,payload:{case:"NEXT_SLIDE"}})},m=function(){return ae({state:a,dispatch:r,payload:{case:"SHOW_SCORE"}})};return Object(z.jsxs)("div",{className:t.header,children:[Object(z.jsx)("ol",{className:t.headerIndicators,children:s.map((function(e){return Object(z.jsx)(te,{id:e,enabled:p},e)}))}),i.language_bundle&&Object(z.jsxs)("div",{className:t.headerResult,children:[Object(z.jsx)(d.a,{className:t.headerText,variant:"h4",children:c?i.language_bundle.correctAnswer:i.language_bundle.wrongAnswer}),u?Object(z.jsx)(f.a,{onClick:m,disabled:!l,children:i.language_bundle.btnShowResults}):Object(z.jsx)(f.a,{onClick:g,disabled:!l,children:i.language_bundle.btnNextQuestion})]})]})},oe=function(e){var t=e.baseUrl,n=e.munchkinId,a=e.formId,r=e.callback,o=e.whenReadyCallback,s=e.handleSuccess,c=Object(i.useState)(!1),l=Object(j.a)(c,2),d=l[0],u=l[1];Object(i.useEffect)((function(){return t&&n&&a?d?(window.MktoForms2.loadForm(t,n,a,r),void window.MktoForms2.whenReady(o)):void function(e,t){if(window.MktoForms2)return t(!0);var n=document.createElement("script");n.src="".concat(e,"/js/forms2/js/forms2.min.js"),n.onload=function(){return window.MktoForms2?t(!0):null},document.body.appendChild(n)}(t,u):"Fill the fields and a form should appear"}),[d,t,n,a,r,s])},se=Object(y.a)((function(e){return{duration:{display:"flex",alignItems:"center",flexWrap:"wrap",justifyContent:"center","& svg":{marginRight:"3px"},marginTop:"".concat(e.spacing(3),"px")},description:{maxWidth:"500px",margin:"".concat(e.spacing(4),"px auto")},consent:{width:"100%",paddingRight:"".concat(e.spacing(4),"px"),paddingLeft:"".concat(e.spacing(4),"px"),zIndex:3,"& ul":{listStyle:"none",padding:0},"& li":{marginBottom:".5rem"}},consentTitle:{textTransform:"capitalize",textDecoration:"underline"},cxsError:{backgroundColor:e.palette.error.dark,borderRadius:"3px",display:"inline",padding:"5px 10px"}}})),ce=function(e){return Object(x.a)(Object(x.a)({},e),{},{consents:[]})},le=function(e){var t=e.showNext,n=e.workspace,a=e.consents;if(t&&"LIVE"!==n)return!0;var r=a.filter((function(e){return e.checked||e.granted}));return a.length===r.length};function de(e,t){var n=t.payload;switch(t.case){case"DATA_READY_CONSENT":var a=e.consents,r=n.consentData,i=n.scope,o=n.cxs,s=n.consent_status;console.debug("[QUIZ] DATA_READY_CONSENT -> consentData :",r);var c=g()(r,"identifier"),l='consents["'.concat(i,"/").concat(c,'"]'),d=g()(o,"".concat(l,".status")),u=g()(o,"".concat(l,".revokeDate")),p=s.GRANTED===d&&Date.now()<Date.parse(u);return a=[].concat(Object(h.a)(a),[{id:g()(r,"id"),title:g()(r,"title"),description:g()(r,"description.value"),actived:JSON.parse(g()(r,"actived.value",!1)),checked:!1,identifier:c,granted:p}]),Object(x.a)(Object(x.a)({},e),{},{consents:a,enableStartBtn:le(Object(x.a)(Object(x.a)({},e),{},{consents:a}))});case"DENIED_CONSENT":var b=e.consents,m=n.id;return Object(x.a)(Object(x.a)({},e),{},{consents:b.map((function(e){return e.id===m?Object(x.a)(Object(x.a)({},e),{},{granted:!1}):e})),enableStartBtn:!1});case"TOGGLE_CONSENT":var j=e.consents,f=n.id;return j=j.map((function(e){return e.id===f?Object(x.a)(Object(x.a)({},e),{},{checked:!e.checked}):e})),Object(x.a)(Object(x.a)({},e),{},{consents:j,enableStartBtn:le(Object(x.a)(Object(x.a)({},e),{},{consents:j}))});default:throw new Error("[QUIZ] action case '".concat(t.case,"' is unknown "))}}var ue,pe,ge=function(e){var t=e.formId;return oe(e),Object(z.jsx)("form",{id:"mktoForm_".concat(t)})},be=function(e){var t=se(e),n=X(e),a=o.a.useContext(b),r=a.state,i=a.dispatch,s=r.quiz,c=r.showNext,l=r.currentSlide,u=r.jContent,p=r.cxs,g=u.consent_status,m=u.scope,h=u.gql_variables,x=u.language_bundle,O=u.mktgForm,y=!(c&&s.consents.length>0)||"LIVE"!==h.workspace,w=o.a.useReducer(de,{enableStartBtn:y,workspace:h.workspace,showNext:c},ce),S=Object(j.a)(w,2),E=S[0],k=S[1];console.debug("[DISPLAY] quiz : ",s.title);var N=l===s.id,I=function(){E.consents.forEach((function(e){e.granted||T({scope:m,typeIdentifier:e.identifier,status:g.GRANTED})})),ae({state:r,dispatch:i,payload:{case:"NEXT_SLIDE"}})},R=function(e,t){return ae({state:r,dispatch:i,payload:{case:"NEXT_SLIDE"}}),!1},_=function(e,t){e.addHiddenFields({pageURL:document.location.href,cxsProfileId:p?p.profileId:""}),e.onSuccess(R)};return Object(z.jsxs)("div",{className:Object(J.a)(n.item,n.showOverlay,N?"active":""),children:[Object(z.jsx)(ie,{}),s.media&&Object(z.jsx)(Y,{id:s.media.id,type:s.media.type?s.media.type.value:null,mixins:s.media.mixins?s.media.mixins.map((function(e){return e.value})):[],path:s.media.path,alt:s.title}),Object(z.jsxs)("div",{className:Object(J.a)(n.caption,n.captionMain),children:[Object(z.jsx)(d.a,{className:n.textUppercase,variant:"h3",children:s.title}),Object(z.jsx)(d.a,{className:n.subtitle,color:"primary",variant:"h4",children:s.subtitle}),Object(z.jsxs)(d.a,{component:"div",className:t.duration,children:[Object(z.jsx)(v.a,{}),s.duration]}),Object(z.jsx)(d.a,{component:"div",className:t.description,dangerouslySetInnerHTML:{__html:Z.a.sanitize(s.description,{ADD_ATTR:["target"]})}}),function(){var e=window.cxs||!1;return r.cxs||e.constructor!==Object||0!==Object.keys(e).length?s.mktgForm?s.mktgForm===O.MARKETO&&s.mktoConfig&&p?Object(z.jsx)(ge,{baseUrl:s.mktoConfig.baseUrl,munchkinId:s.mktoConfig.munchkinId,formId:s.mktoConfig.formId,whenReadyCallback:_}):void 0:Object(z.jsx)(f.a,{onClick:I,disabled:!E.enableStartBtn,children:x&&x.btnStart}):Object(z.jsx)(d.a,{className:t.cxsError,variant:"h5",children:"Internal jExperience connection issue"})}()]}),function(){if(!s.mktgForm)return s.consents.length>0&&p?Object(z.jsxs)("div",{className:t.consent,children:[Object(z.jsx)(d.a,{className:t.consentTitle,variant:"h5",children:x&&x.consentTitle}),Object(z.jsx)("ul",{children:s.consents.map((function(e){return e.actived?Object(z.jsx)($,{id:e.id,quizState:E,quizDispatch:k},e.id):Object(z.jsx)(z.Fragment,{})}))})]}):void 0}()]})},me=Object(m.a)(ue||(ue=Object(w.a)(['\n    query getQna($workspace: Workspace!, $id: String!, $language: String!) {\n        response: jcr(workspace: $workspace) {\n            qna: nodeById(uuid: $id) {\n                id: uuid\n                title:displayName(language:$language)\n                question: property(language:$language, name:"game4:question"){\n                    value\n                }\n                help: property(language:$language,name:"game4:help"){\n                    value\n                }\n                nbExpectedAnswer: property(name:"game4:nbExpectedAnswer"){\n                    value\n                }\n                answers: property(language:$language,name:"game4:answers"){\n                    values\n                }\n                randomSelection: property(name:"game4:randomSelection"){\n                    value\n                }\n                notUsedForScore: property(name:"game4:notUsedForScore"){\n                    value\n                }\n                media: property(language:$language,name:"wden:mediaNode",){\n                    node: refNode {\n                        id: uuid\n                        type: primaryNodeType{\n                            value:name\n                        }\n                        mixins: mixinTypes{\n                            value:name\n                        }\n                        path\n                    }\n                }\n                jExpField2Map: property(name:"game4:jExpProperty"){\n                    value\n                }\n\n            }\n        }\n    }\n']))),je=n(211),he=n(103),xe=n.n(he),fe=Object(y.a)((function(e){return{answerGroup:{display:"flex",alignItems:"center",flexWrap:"wrap",".showResult &":{"&.checked":{backgroundColor:e.palette.background.checkedAnswer,borderRadius:e.geometry.checkedAnswer.borderRadius,'& [class*="-MuiTypography-body1"]':{color:e.palette.grey[900]},"& + div::before":{borderTop:"2px solid transparent"},"&:last-child":{borderBottom:"2px solid transparent"},"::before":{borderTop:"2px solid transparent"}}}},checkGroup:{position:"relative",height:"28px",padding:"2px 4px 2px 2px",marginLeft:"-32px",opacity:0,transition:e.transitions.create(["opacity"],{easing:e.transitions.easing.easeOut}),borderRadius:"5px 0px 0px 5px",backgroundColor:e.palette.grey[300],zIndex:1,".showResult &":{opacity:1},"&::after":{content:'""',width:0,height:0,borderStyle:"solid",borderWidth:"14px 0 14px 18px",position:"absolute",top:0,left:"30px",borderColor:"transparent transparent transparent ".concat(e.palette.grey[300])},"&.valid":{backgroundColor:e.palette.primary.main,color:"rgba(255, 255, 255, 0.87)","&::after":{borderColor:"transparent transparent transparent ".concat(e.palette.primary.main)}},"& svg":{verticalAlign:"unset",overflow:"unset"}},labelGroup:{margin:"unset",marginLeft:"12px"}}})),Oe=function(e){var t=fe(e),n=e.qna,a=e.qnaDispatch,r=e.id,i=n.answers.filter((function(e){return e.id===r})),o=Object(j.a)(i,1)[0],s=o.isAnswer||!!n.notUsedForScore&&o.checked;return Object(z.jsxs)("div",{className:Object(J.a)(t.answerGroup,o.checked?"checked":""),children:[Object(z.jsx)("div",{className:Object(J.a)(t.checkGroup,s?"valid":""),children:s?Object(z.jsx)(R.a,{}):Object(z.jsx)(xe.a,{})}),Object(z.jsx)(C.a,{className:t.labelGroup,control:"checkbox"===n.inputType?Object(z.jsx)(q.a,{id:o.id}):Object(z.jsx)(je.a,{id:o.id}),label:o.label,labelPlacement:"end",onChange:function(){return a({case:"TOGGLE_ANSWER",payload:{answer:o}})},checked:o.checked})]})},ve=function(e){var t=JSON.parse(g()(e,"randomSelection.value",!1)),n=g()(e,"answers.values",[]).map((function(e){var t=JSON.parse(e);return Object(x.a)(Object(x.a)({},t),{},{id:ne(5,"#aA"),checked:!1})}));t&&n.sort((function(e,t){return e.id>t.id}));var a=n.filter((function(e){return e.isAnswer})).length>1?"checkbox":"radio";return{id:g()(e,"id"),title:g()(e,"title"),question:g()(e,"question.value",""),help:g()(e,"help.value",""),notUsedForScore:JSON.parse(g()(e,"notUsedForScore.value",!1)),media:g()(e,"media.node",{}),jExpField2Map:g()(e,"jExpField2Map.value",""),randomSelection:t,answers:n,inputType:a}},ye=Object(y.a)((function(e){return{questionGroup:{textAlign:"left",marginTop:"".concat(e.spacing(2),"px"),marginBottom:"".concat(e.spacing(4),"px")},question:{marginBottom:"".concat(e.spacing(2),"px")},formGroup:{textAlign:"left","& > div::before":{flexBasis:"100%",content:'""',height:"2px",marginLeft:"50px",borderTop:"2px solid rgba(255,255,255,.2)"},"&  > div:first-child::before":{borderTop:"none"},"&  > div:last-child::after":{flexBasis:"100%",content:'""',height:"2px",marginLeft:"50px",borderBottom:"2px solid rgba(255,255,255,.2)"},marginBottom:"".concat(e.spacing(4),"px")}}})),we={enableSubmit:!1},Se=function(e,t){var n=t.payload;switch(t.case){case"DATA_READY":var a=n.qnaData;return console.debug("[STORE QNA] DATA_READY -> qnaData :",a),Object(x.a)(Object(x.a)({},e),ve(a));case"TOGGLE_ANSWER":var r=n.answer;console.debug("[STORE QNA] TOGGLE_ANSWER -> answer :",r);var i=e.answers;"radio"===e.inputType&&(i=i.map((function(e){return Object(x.a)(Object(x.a)({},e),{},{checked:!1})})));var o=(i=i.map((function(e){return e.id===r.id?Object(x.a)(Object(x.a)({},e),{},{checked:!e.checked}):e}))).filter((function(e){return e.checked})).length>0;return Object(x.a)(Object(x.a)({},e),{},{answers:i,enableSubmit:o});case"RESET":var s=n.qnaData;return console.debug("[STORE QNA] RESET -> qnaData :",s),Object(x.a)(Object(x.a)({},we),ve(s));default:throw new Error("[STORE QNA] action case '".concat(t.case,"' is unknown "))}},Ee=function(e){var t=ye(e),n=X(e),a=o.a.useContext(b),r=a.state,i=a.dispatch,s=r.currentSlide,c=r.jContent,l=r.reset,p=c.gql_variables,m=c.language_bundle,h=Object.assign(p,{id:e.id}),x=Object(u.a)(me,{variables:h}),O=x.loading,v=x.error,y=x.data,w=o.a.useReducer(Se,we),S=Object(j.a)(w,2),k=S[0],T=S[1];if(o.a.useEffect((function(){if(!1===O&&y){var e=g()(y,"response.qna",{});T({case:"DATA_READY",payload:{qnaData:e}})}}),[O,y]),o.a.useEffect((function(){if(l&&y){var e=g()(y,"response.qna",{});T({case:"RESET",payload:{qnaData:e}})}}),[l,y]),O)return Object(z.jsx)("p",{children:"Loading..."});if(v)return Object(z.jsx)("p",{children:"Error :("});console.debug("[DISPLAY] qna : ",k.title);var I=s===e.id;return Object(z.jsxs)("div",{className:Object(J.a)(n.item,n.showOverlay,I?"active":""),children:[Object(z.jsx)(ie,{}),k.media&&Object(z.jsx)(Y,{id:k.media.id,type:k.media.type?k.media.type.value:null,mixins:k.media.mixins?k.media.mixins.map((function(e){return e.value})):[],path:k.media.path,alt:k.title}),Object(z.jsxs)("div",{className:n.caption,children:[Object(z.jsxs)("div",{className:t.questionGroup,children:[Object(z.jsx)(d.a,{className:t.question,variant:"h4",children:k.question}),Object(z.jsx)(d.a,{variant:"h5",children:k.help})]}),Object(z.jsx)(A.a,{className:t.formGroup,style:{},"aria-label":"answer",children:function(){if(k.answers)return k.answers.map((function(e){return Object(z.jsx)(Oe,{id:e.id,qna:k,qnaDispatch:T},e.id)}))}()}),Object(z.jsx)(f.a,{onClick:function(){if(k.jExpField2Map){var e=k.answers.filter((function(e){return e.checked})).reduce((function(e,t,n){return t.cdpValue&&t.cdpValue.length>0&&(e=0===n?t.cdpValue:"".concat(e,", ").concat(t.cdpValue)),e}),null);!function(e){var t=e.propertyName,n=e.propertyValue;N.a.track("updateQuizVisitorData",{update:Object(E.a)({},t,n)})}({propertyName:"properties.".concat(k.jExpField2Map),propertyValue:e})}var t={case:"SHOW_RESULT",payload:{skipScore:k.notUsedForScore,result:k.notUsedForScore?null:k.answers.filter((function(e){return e.isAnswer})).reduce((function(e,t){return e&&t.checked}),!0)}};k.notUsedForScore?ae({state:r,dispatch:i,payload:t}):i(t)},disabled:!k.enableSubmit,children:m&&m.btnSubmit})]})]})},ke=function(e,t){var n=null,a=g()(e,"videoLink.value",""),r=g()(e,"videoIntPath.node");return a&&(n=r||{id:null,type:{value:t.EXT_VIDEO},path:g()(e,"videoExtPath.value")}),{id:g()(e,"id",""),title:g()(e,"title",""),subtitle:g()(e,"subtitle.value",""),content:g()(e,"content.value",""),duration:g()(e,"duration.value",""),media:g()(e,"media.node",{}),childNodes:g()(e,"children.nodes",[]).map((function(e){return{id:g()(e,"id"),type:g()(e,"type.value")}})),video:n}},Ne=Object(y.a)((function(e){return{contentGroup:{textAlign:"justify",maxWidth:"800px",margin:"auto",marginTop:"".concat(e.spacing(3),"px"),marginBottom:"".concat(e.spacing(4),"px")}}})),Te=function(e){var t=Ne(e),n=X(e),a=o.a.useContext(b),r=a.state,i=a.dispatch,s=r.currentSlide,c=r.jContent,l=c.gql_variables,p=c.cnd_type,h=c.language_bundle,x=Object.assign(l,{id:e.id}),O=Object(u.a)(function(e){var t="children {\n                        nodes {\n                            id: uuid\n                            type: primaryNodeType{\n                                value:name\n                            }\n                        }\n                    },";"LIVE"===e.workspace&&(t='children(propertiesFilter:{\n                            filters:[{\n                                property:"j:published",\n                                value:"true",\n                                evaluation:EQUAL\n                            }]\n                        }){\n                        nodes {\n                            id: uuid\n                            type: primaryNodeType{\n                                value:name\n                            }\n                        }\n                    },');var n='\n        query getWarmup($workspace: Workspace!, $id: String!, $language: String!) {\n            response: jcr(workspace: $workspace) {\n                warmup: nodeById(uuid: $id) {\n                    id: uuid\n                    title:displayName(language:$language)\n                    subtitle: property(language:$language, name:"game4:subtitle"){\n                        value\n                    }\n                    content: property(language:$language,name:"game4:content"){\n                        value\n                    }\n                    duration: property(name:"game4:qnaDuration"){\n                        value\n                    }\n                    videoLink: property(name:"game4:videoLink"){\n                        value\n                    }\n                    videoExtPath: property(language:$language,name:"game4:videoExtPath"){\n                        value\n                    }\n                    videoIntPath: property(language:$language,name:"game4:videoIntPath"){\n                        node: refNode {\n                            id: uuid\n                            type: primaryNodeType{\n                                value:name\n                            }\n                            path\n                        }\n                    }\n                    media: property(language:$language,name:"wden:mediaNode",){\n                        node: refNode {\n                            id: uuid\n                            type: primaryNodeType{\n                                value:name\n                            }\n                            mixins: mixinTypes{\n                                value:name\n                            }\n                            path\n                        }\n                    }\n                    '.concat(t,"\n                }\n            }\n        }\n    ");return Object(m.a)(n)}({workspace:l.workspace}),{variables:x}),v=O.loading,y=O.error,w=O.data,S=o.a.useState({childNodes:[]}),E=Object(j.a)(S,2),k=E[0],N=E[1];if(o.a.useEffect((function(){if(!1===v&&w){var e=ke(g()(w,"response.warmup",{}),p);i({case:"ADD_SLIDES",payload:{slides:e.childNodes.map((function(e){return e.id})),parentSlide:e.id}}),N(e)}}),[v,w]),v)return Object(z.jsx)("p",{children:"Loading..."});if(y)return Object(z.jsx)("p",{children:"Error :("});console.debug("[DISPLAY] warmup : ",k.title);var T=s===e.id;return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)("div",{className:Object(J.a)(n.item,n.showOverlay,T?"active":""),children:[Object(z.jsx)(ie,{}),k.media&&Object(z.jsx)(Y,{id:k.media.id,type:k.media.type?k.media.type.value:null,mixins:k.media.mixins?k.media.mixins.map((function(e){return e.value})):[],path:k.media.path,alt:k.title}),Object(z.jsxs)("div",{className:Object(J.a)(n.caption,n.captionMain),children:[Object(z.jsx)(d.a,{className:n.textUppercase,variant:"h3",children:k.title}),Object(z.jsx)(d.a,{className:n.subtitle,color:"primary",variant:"h4",children:k.subtitle}),Object(z.jsxs)("div",{className:t.contentGroup,children:[Object(z.jsx)(d.a,{component:"div",className:t.content,dangerouslySetInnerHTML:{__html:Z.a.sanitize(k.content,{ADD_ATTR:["target"]})}}),null!=k.video&&Object(z.jsx)("div",{children:Object(z.jsx)(Y,{id:k.video.id||null,type:k.video.type.value,mixins:[],path:k.video.path,sourceID:k.id})})]}),Object(z.jsx)(f.a,{onClick:function(){return ae({state:r,dispatch:i,payload:{case:"NEXT_SLIDE"}})},children:h&&h.btnQuestion})]})]}),k.childNodes.map((function(e){return Object(z.jsx)(Ee,{id:e.id},e.id)}))]})},Ie=Object(m.a)(pe||(pe=Object(w.a)(['\n    query getPersonalizedResultContent($workspace: Workspace!, $id: String!, $language: String!,$profileId: String,$sessionId: String) {\n        response: jcr(workspace: $workspace) {\n            result: nodeById(uuid: $id) {\n                jExperience: jExperience(profileId: $profileId, sessionId: $sessionId) {\n                    variant:personalizedVariant{\n                        id: uuid\n                        title:displayName(language:$language)\n                        text:property(language:$language,name:"text"){\n                            value\n                        }\n                    }\n                }\n            }\n        }\n    }\n']))),Re=Object(y.a)((function(e){return{result:{marginTop:"".concat(e.spacing(4),"px")}}})),_e=function(e){var t=e.id,n=e.cxs,a=X(e),r=Re(e),i=o.a.useContext(b).state.jContent,s=o.a.useState({}),c=Object(j.a)(s,2),l=c[0],p=c[1],m=Object(u.a)(Ie,{variables:Object.assign(i.gql_variables,{profileId:n.profileId,sessionId:n.sessionId,id:t}),fetchPolicy:"no-cache"}),h=m.loading,f=m.error,O=m.data;return o.a.useEffect((function(){if(!1===h&&O){var e=g()(O,"response.result.jExperience.variant",{});p(Object(x.a)(Object(x.a)({},e),{},{text:e.text.value}))}}),[h,O]),h?Object(z.jsx)(d.a,{className:Object(J.a)(a.wait,a.textUppercase),variant:"body2",children:"score calculation in progress..."}):f?Object(z.jsx)(d.a,{className:Object(J.a)(a.wait,a.textUppercase),variant:"body2",children:"Error getting your result."}):(console.debug("*** paint personalized result : ",l.title),Object(z.jsx)(d.a,{className:r.result,component:"div",dangerouslySetInnerHTML:{__html:Z.a.sanitize(l.text,{ADD_ATTR:["target"]})}}))},De=n(104),Ae=Object(y.a)((function(e){return{result:{marginTop:"".concat(e.spacing(4),"px"),maxWidth:"300px",margin:"32px auto","& .CircularProgressbar":{"& .CircularProgressbar":{"&-text":{fill:e.palette.primary.main,fontFamily:e.typography.fontFamily},"&-trail":{stroke:e.palette.grey[300]},"&-path":{stroke:e.palette.primary.main}}}}}})),Ce=function(e){var t=e.score,n=Ae(e);return console.debug("*** paint percentage result : ",t),Object(z.jsx)("div",{className:n.result,children:Object(z.jsx)(De.a,{value:t,text:"".concat(t,"%")})})},qe=function(e){var t=X(e),n=o.a.useContext(b),a=n.state,r=n.dispatch,i=o.a.useState(!1),s=Object(j.a)(i,2),c=s[0],l=s[1],u=a.quiz,p=a.currentSlide,g=a.score,m=a.scoreIndex,h=a.jContent,x=a.cxs,O=a.transitionIsEnabled,v=a.transitionTimeout,y=a.resetBtnIsEnabled,w=h.language_bundle,S=p===m;o.a.useEffect((function(){u.personalizedResult.id&&setTimeout((function(){return l(!0)}),1e3)}),[]);var E=function(){O?(r({case:"TOGGLE_TRANSITION"}),setTimeout((function(){return r({case:"TOGGLE_TRANSITION"})}),v),setTimeout((function(){return r({case:"RESET"})}),v)):r({case:"RESET"})};return Object(z.jsxs)("div",{className:Object(J.a)(t.item,t.showOverlay,S?"active":""),children:[Object(z.jsx)(ie,{}),u.media&&Object(z.jsx)(Y,{id:u.media.id,type:u.media.type?u.media.type.value:null,mixins:u.media.mixins?u.media.mixins.map((function(e){return e.value})):[],path:u.media.path,alt:u.title}),Object(z.jsxs)("div",{className:Object(J.a)(t.caption,t.captionMain),children:[Object(z.jsx)(d.a,{className:t.textUppercase,variant:"h3",children:u.title}),Object(z.jsx)(d.a,{className:t.subtitle,color:"primary",variant:"h4",children:u.subtitle}),u.personalizedResult.id?x&&c?Object(z.jsx)(_e,{id:u.personalizedResult.id,cxs:x}):Object(z.jsx)(d.a,{className:Object(J.a)(t.wait,t.textUppercase),variant:"body2",children:"score calculation in progress..."}):Object(z.jsx)(Ce,{score:g}),function(){if(y)return Object(z.jsx)(f.a,{onClick:E,children:w&&w.btnReset})}()]})]})},ze=n(208),Le=n(109),$e=n(105),Fe=n.n($e),Ue=function(e){var t={geometry:{header:{result:{height:"45px"}},item:{minHeight:"700px"},caption:{padding:{lg:"60px",xs:"45px",main:"20px"}},indicator:{width:"30px",height:"3px",hitAreaHeight:"10px",spacer:"3px"},checkedAnswer:{borderRadius:"10px"}},palette:{primary:{light:"#009bdc",main:"#007cb0",dark:"#005f87"},secondary:{light:"#f57c30",main:"#e57834",dark:"#bd5715"},text:{primary:"rgba(255, 255, 255, 0.87)",secondary:"rgba(0, 0, 0, 0.87)"},background:{overlay:{start:"rgba(0,0,0,.95)",startMiddle:"rgba(0,0,0,.9)",endMiddle:"rgba(0,0,0,.85)",end:"rgba(0,0,0,.75)"},checkedAnswer:"rgba(255,255,255,1)"},shadows:{overlay:{lg:"inset 1140px 0 570px -570px rgba(0,0,0,.5)",xs:"inset 500px 0 250px -250px rgba(0,0,0,.5)"}}},typography:{allVariants:{color:"rgba(255, 255, 255, 0.87)"},fontFamily:["Lato","Helvetica","Arial","sans-serif"].join(","),h3:{fontWeight:300},h4:{fontWeight:300},body1:{fontSize:"1.1rem"}},transitions:{easing:{ease:"cubic-bezier(0.25, 0.1, 0.25, 1)",header:"cubic-bezier(.23,1,.32,1)"},duration:{long:600}},spacing:8,overrides:{MuiCheckbox:{root:{color:"rgba(255, 255, 255, 0.87)"}},MuiRadio:{root:{color:"rgba(255, 255, 255, 0.87)"}},MuiButton:{contained:{"&$disabled":{color:"rgba(255, 255, 255, 0.26)",backgroundColor:"rgba(255, 255, 255, 0.12)"}}},MuiTypography:{body1:{"& a":{color:"#007cb0"}}}},props:{MuiButton:{disableRipple:!0,color:"primary",variant:"contained"},MuiCheckbox:{disableRipple:!0,color:"primary"},MuiRadio:{disableRipple:!0,color:"primary"}}};return Object(Le.a)(Fe()(t,e))},We=function(e){var t=e.length;return e.reduce((function(e,n,a){var r=a+1;return e["&:nth-child(".concat(r,")")]={top:"calc(".concat(r-1," * ").concat(100/t,"%)"),transitionDelay:"".concat(.1*(r-1),"s")},e}),{})},Ge=function(e){var t=o.a.useContext(b).state,n=t.transitionActive,a=t.transitionRow,r=t.transitionLabel,i=Object(y.a)((function(e){return{loader:{position:"absolute",zIndex:5,top:0,left:0,bottom:0,width:0,transition:"width 0s 1.4s ease","&.active":{width:"100%",transitionDelay:"0s"}},icon:{position:"absolute",zIndex:1,top:"50%",left:"50%",transform:"translateX(-50%) translateY(-50%)",opacity:0,transition:"opacity .5s ease","& svg":{transformOrigin:"0 0"},".active &":{opacity:1}},text:{textTransform:"uppercase"},tile:Object(x.a)(Object(x.a)({position:"absolute",left:0,width:0,height:"".concat(100/a.length,"%"),backgroundColor:e.palette.primary.main,transition:"width .3s ease"},We(a)),{},{".active &":{width:"100%"}})}}))(e);return Object(z.jsxs)("div",{className:Object(J.a)(i.loader,n?"active":""),children:[Object(z.jsx)("div",{className:i.icon,children:Object(z.jsx)(d.a,{variant:"h4",className:i.text,children:r})}),a.map((function(e,t){return Object(z.jsx)("div",{className:i.tile},t)}))]})},Me=Object(y.a)((function(e){return{main:{position:"relative","& *, &::after, &::before":{boxSizing:"border-box"}}}})),Be=function(e){var t=Me(e),n=o.a.useContext(b),a=n.state,r=n.dispatch,i=a.jContent,s=a.quiz,c=a.showResult,p=a.showScore,j=Object(u.a)(function(e){var t="children {\n                        nodes {\n                            id: uuid\n                            type: primaryNodeType{\n                                value:name\n                            }\n                        }\n                    },";"LIVE"===e.workspace&&(t='children(propertiesFilter:{\n                            filters:[{\n                                property:"j:published",\n                                value:"true",\n                                evaluation:EQUAL\n                            }]\n                        }){\n                        nodes {\n                            id: uuid\n                            type: primaryNodeType{\n                                value:name\n                            }\n                        }\n                    },');var n='\n        query getQuiz($workspace: Workspace!, $id: String!, $language: String!) {\n            response: jcr(workspace: $workspace) {\n                quiz: nodeById(uuid: $id) {\n                    id: uuid\n                    type: primaryNodeType{\n                        value:name\n                    }\n                    key: property(name:"game4:quizKey"){\n                        value\n                    }\n                    title: displayName(language:$language)\n                    subtitle: property(language:$language, name:"game4:subtitle"){\n                        value\n                    }\n                    description: property(language:$language,name:"game4:description"){\n                        value\n                    }\n                    duration: property(name:"game4:duration"){\n                        value\n                    }\n                    userTheme: property(name:"game4:webappTheme"){\n                        value\n                    }\n                    transition: property(name:"game4:transition"){\n                        value\n                    }\n                    transitionLabel: property(name:"game4:transitionLabel"){\n                        value\n                    }\n                    reset: property(name:"game4:reset"){\n                        value\n                    }\n                    browsing: property(name:"game4:browsing"){\n                        value\n                    }\n                    mktgForm: property(name:"game4:marketingFormChoice"){\n                        value\n                    }\n                    mktoConfig: property(language:$language,name:"game4:mktoConfig"){\n                        value\n                    }\n                    media: property(language:$language,name:"wden:mediaNode",){\n                        node: refNode {\n                            id: uuid\n                            type: primaryNodeType{\n                                value:name\n                            }\n                            mixins: mixinTypes{\n                                value:name\n                            }\n                            path\n                        }\n                    }\n                    consents: property(name:"game4:consentType"){\n                        nodes: refNodes {\n                            id: uuid\n                            actived: property(language:$language,name:"wem:activated"){\n                                value\n                            }\n                        }\n                    }\n                    personalizedResult: property(name:"game4:personalizedResultContent"){\n                        node: refNode {\n                            id: uuid\n                            type: primaryNodeType{\n                                value:name\n                            }\n                        }\n                    }\n                    '.concat(t,'\n                    btnStart: property(language:$language, name:"game4:btnStart"){\n                        value\n                    },\n                    btnSubmit: property(language:$language, name:"game4:btnSubmit"){\n                        value\n                    },\n                    btnQuestion: property(language:$language, name:"game4:btnQuestion"){\n                        value\n                    },\n                    btnNextQuestion: property(language:$language, name:"game4:btnNextQuestion"){\n                        value\n                    },\n                    btnShowResults: property(language:$language, name:"game4:btnShowResults"){\n                        value\n                    },\n                    btnReset: property(language:$language, name:"game4:btnReset"){\n                        value\n                    },\n                    consentTitle: property(language:$language, name:"game4:consentTitle"){\n                        value\n                    },\n                    correctAnswer: property(language:$language, name:"game4:correctAnswer"){\n                        value\n                    },\n                    wrongAnswer: property(language:$language, name:"game4:wrongAnswer"){\n                        value\n                    }\n                }\n            }\n        }\n    ');return Object(m.a)(n)}({workspace:i.gql_variables.workspace}),{variables:i.gql_variables}),h=j.loading,x=j.error,f=j.data;if(o.a.useEffect((function(){if(console.debug("[INIT] App Quiz"),!1===h&&f){console.debug("[INIT] App Quiz Data");var e=g()(f,"response.quiz",{});i.language_bundle=function(e){return["btnStart","btnSubmit","btnQuestion","btnNextQuestion","btnShowResults","btnReset","consentTitle","correctAnswer","wrongAnswer"].reduce((function(t,n){return t[n]=g()(e,"".concat(n,".value")),t}),{})}(e),console.debug("[INIT] jContent.language_bundle: ",i.language_bundle),r({case:"DATA_READY",payload:{quizData:e}}),"LIVE"===i.gql_variables.workspace&&function(e){var t=e.scope,n=e.url,a=(e.sessionId,e.dispatch);N.a.initialize({"Apache Unomi":{scope:t,url:n}}),N.a.ready((function(){return a({case:"ADD_CXS",payload:{cxs:window.cxs}})}))}({scope:i.scope,url:i.cdp_endpoint,dispatch:r})}}),[h,f]),h)return Object(z.jsx)("p",{children:"Loading..."});if(x)return Object(z.jsx)("p",{children:"Error :("});return Object(z.jsx)(ze.a,{theme:Ue(s?s.userTheme:{}),children:Object(z.jsx)(l.a,{container:!0,spacing:3,children:Object(z.jsx)(l.a,{item:!0,xs:!0,style:{margin:"auto"},children:Object(z.jsxs)("div",{className:Object(J.a)(t.main,c?"showResult":""),children:[Object(z.jsx)(Ge,{}),s&&Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(be,{},s.id),s.childNodes.map((function(e,t){return e.type===i.cnd_type.QNA?Object(z.jsx)(Ee,{id:e.id},e.id):e.type===i.cnd_type.WARMUP?Object(z.jsx)(Te,{id:e.id},e.id):Object(z.jsxs)(d.a,{color:"error",component:"p",children:["node type ",e.type," is not supported"]})})),function(){if(p)return Object(z.jsx)(qe,{})}()]})]})})})})},Pe=function(e){var t=e.item,n=e.errors;return Object(z.jsxs)("div",{children:[Object(z.jsx)("h1",{children:"Validation errors"}),Object(z.jsxs)("p",{children:["An error occurred when validating ",Object(z.jsx)("b",{children:t})]}),Object(z.jsx)("ul",{children:n.map((function(e){var t=g()(e,"params.additionalProperty");return Object(z.jsxs)("li",{children:[e.message,Object(z.jsx)("b",{children:t?": ".concat(t):""})]},"".concat(e.keyword,"_").concat(t))}))})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Qe=n(204),Ve=n(210),He=n(33),Ye=n(21),Je=n(106),Xe={QNA:"game4nt:qna",WARMUP:"game4nt:warmup",WIDEN_IMAGE:"wdennt:image",WIDEN_VIDEO:"wdennt:video",EXT_VIDEO:"ext:video",JNT_FILE:"jnt:file",IMAGE:"jmix:image"},Ke={GRANTED:"GRANTED",DENIED:"DENIED",REVOKED:"REVOKED"},Ze={MARKETO:"mkto"},et={title:"context validation schema ",description:"context is an object provided by the page in charge to load the app",type:"object",properties:{host:{type:"string",format:"uri",default:"http://localhost:8080"},workspace:{type:"string",enum:["default","live"],default:"live"},scope:{type:"string",pattern:"[a-zA-Z0-9-_]+"},files_endpoint:{type:"string",format:"uri",default:"http://localhost:8080/files/live"},gql_endpoint:{type:"string",format:"uri",default:"http://localhost:8080/modules/graphql"},gql_authorization:{type:"string"},gql_variables:{type:"object",properties:{id:{type:"string"},language:{type:"string",pattern:"[a-z]{2}(?:_[A-Z]{2})?"}},required:["id","language"]},cdp_endpoint:{type:"string",format:"uri",default:"http://localhost:8181"}},required:["host","workspace","scope","files_endpoint","gql_endpoint","gql_authorization","gql_variables","cdp_endpoint"],additionalProperties:!1},tt=n(107),nt=n(69),at=n(108),rt=n(110),it=n(111),ot=function(e){Object(at.a)(n,e);var t=Object(rt.a)(n);function n(e){var a,r=e.message,i=e.errors;return Object(tt.a)(this,n),(a=t.call(this,r)).name=a.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(Object(nt.a)(a),a.constructor),a.errors=i,a}return n}(Object(it.a)(Error)),st=new Je({useDefaults:!0}),ct=function(e){if("string"===typeof e)try{return JSON.parse(e)}catch(t){console.error("the user theme => \n"+e+"\n => is not a json object : ",t)}return e},lt=function(e){if(e&&"string"===typeof e)try{return JSON.parse(e)}catch(t){console.error("the marketo config => \n"+e+"\n => is not a json object : ",t)}},dt=function(e){return{id:g()(e,"id"),type:g()(e,"type.value"),key:g()(e,"key.value",{}),title:g()(e,"title",""),subtitle:g()(e,"subtitle.value",""),description:g()(e,"description.value",""),duration:g()(e,"duration.value",""),userTheme:ct(g()(e,"userTheme.value",{})),transitionIsEnabled:JSON.parse(g()(e,"transition.value",!1)),transitionLabel:g()(e,"transitionLabel.value",""),resetIsEnabled:JSON.parse(g()(e,"reset.value",!1)),browsingIsEnabled:JSON.parse(g()(e,"browsing.value",!1)),media:g()(e,"media.node",{}),mktgForm:g()(e,"mktgForm.value"),mktoConfig:lt(g()(e,"mktoConfig.value")),consents:g()(e,"consents.nodes",[]).map((function(e){return{id:g()(e,"id"),actived:JSON.parse(g()(e,"actived.value"))}})),personalizedResult:{id:g()(e,"personalizedResult.node.id",null),type:g()(e,"personalizedResult.node.type.value",null)},childNodes:g()(e,"children.nodes",[]).map((function(e){return{id:g()(e,"id"),type:g()(e,"type.value")}}))}},ut=function(e){return{jContent:e,quiz:null,resultSet:[],currentResult:!1,slideSet:[],currentSlide:null,showResult:!1,showNext:!1,showScore:!1,max:-1,score:0,cxs:null,reset:!1,resetBtnIsEnabled:!1,transitionActive:!1,transitionIsEnabled:!1,transitionLabel:"jahia",transitionTimeout:1e3,transitionRow:Object(h.a)(Array(5)),browsingIsEnabled:!1,scoreIndex:ne(5,"#aA")}},pt=function(e,t){var n=t.payload,a=function(e){var t=e.slideSet,n=e.max,a=e.slide;return t.indexOf(a)<n},r=function(e){var t=e.resultSet,n=e.quizKey,a=e.split,r=100;if(t.length>0){var i=t.filter((function(e){return e})).length,o=t.length;r=Math.floor(i/o*100)}return setTimeout((function(){return function(e){var t=e.quizKey,n=(e.split,e.quizScore);return N.a.track("setQuizScore",{update:Object(E.a)({},"properties.quiz-score-".concat(t),n),quizKey:t})}({quizKey:n,split:a,quizScore:r})}),500),r};switch(t.case){case"DATA_READY":var i=n.quizData;console.debug("[STORE] DATA_READY - quizData: ",i);var o=dt(i),s=[o.id];o.childNodes.forEach((function(e){return s.push(e.id)})),s.push(e.scoreIndex);var c=s.length-1;return Object(x.a)(Object(x.a)({},e),{},{quiz:o,currentSlide:o.id,transitionIsEnabled:o.transitionIsEnabled,transitionLabel:o.transitionLabel,resetBtnIsEnabled:o.resetIsEnabled,browsingIsEnabled:o.browsingIsEnabled,slideSet:s,showNext:a({slideSet:s,max:c,slide:o.id}),max:c});case"ADD_CXS":var l=n.cxs;return console.debug("[STORE] ADD_CXS - cxs: ",l),Object(x.a)(Object(x.a)({},e),{},{cxs:l});case"ADD_SLIDES":var d=n.slides,u=n.parentSlide,p=e.slideSet;if(u&&p.includes(u)){var g,b=p.indexOf(u)+1;(g=p).splice.apply(g,[b,0].concat(Object(h.a)(d)))}else p=[].concat(Object(h.a)(p),Object(h.a)(d));var m=p.length-1;return console.debug("[STORE] ADD_SLIDE - slides: ",d," parentSlide: ",u),Object(x.a)(Object(x.a)({},e),{},{slideSet:p,showNext:a({slideSet:p,max:m,slide:e.currentSlide}),max:m});case"NEXT_SLIDE":var f=e.slideSet.indexOf(e.currentSlide),O=f+1;console.debug("[STORE] NEXT_SLIDE - currentIndex: ",f,", max : ",e.max);var v=e.currentSlide;return f<e.max&&(v=e.slideSet[O]),Object(x.a)(Object(x.a)({},e),{},{currentSlide:v,showNext:a(Object(x.a)(Object(x.a)({},e),{},{slide:v})),showResult:!1,reset:!1});case"SHOW_SCORE":console.debug("[STORE] SHOW_SCORE");var y=e.slideSet.slice(-1),w=Object(j.a)(y,1)[0],S=e.score;return S=r({resultSet:e.resultSet,quizKey:e.quiz.key,split:e.jContent.score_splitPattern}),Object(x.a)(Object(x.a)({},e),{},{currentSlide:w,showNext:a(Object(x.a)(Object(x.a)({},e),{},{slide:w})),showResult:!1,score:S});case"SHOW_SLIDE":var k=n.slide;return console.debug("[STORE] SHOW_SLIDE - slide: ",k),Object(x.a)(Object(x.a)({},e),{},{currentSlide:k,showNext:a(Object(x.a)(Object(x.a)({},e),{},{slide:k}))});case"SHOW_RESULT":var T=n.result,I=n.skipScore,R=e.slideSet.indexOf(e.currentSlide)+1,_=R===e.max;console.debug("[STORE] SHOW_RESULT - currentResult: ",T);var D=null!==T?[].concat(Object(h.a)(e.resultSet),[T]):Object(h.a)(e.resultSet),A=e.score,C=e.currentSlide;if(I)if(_){A=r({resultSet:D,quizKey:e.quiz.key,split:e.jContent.score_splitPattern});var q=e.slideSet.slice(-1);C=Object(j.a)(q,1)[0]}else C=e.slideSet[R];return Object(x.a)(Object(x.a)({},e),{},{currentSlide:C,showNext:a(Object(x.a)(Object(x.a)({},e),{},{slide:C})),showScore:_,resultSet:D,currentResult:T,score:A,showResult:!I});case"RESET":console.debug("[STORE] RESET");var z=e.slideSet.slice(0,1),L=Object(j.a)(z,1)[0];return console.debug("[STORE] RESET slideSet",e.slideSet),Object(x.a)(Object(x.a)({},e),{},{currentSlide:L,resultSet:[],showScore:!1,currentResult:!1,reset:!0});case"TOGGLE_TRANSITION":return console.debug("[STORE] TOGGLE_TRANSITION"),Object(x.a)(Object(x.a)({},e),{},{transitionActive:!e.transitionActive});default:throw new Error("[STORE] action case '".concat(t.case,"' is unknown "))}},gt=function(e){var t=o.a.useReducer(pt,e.jContent,ut),n=Object(j.a)(t,2),a=n[0],r=n[1];return Object(z.jsx)(b.Provider,{value:{state:a,dispatch:r},children:e.children})};n(180);window.quizUIApp=function(e,t){try{t=function(e){var t;if(!st.validate(et,e))throw new ot({message:"Context configuration object",errors:st.errors});return e.gql_variables.workspace="default"===(t=e.workspace)?"EDIT":t.toUpperCase(),e.cnd_type=Xe,e.consent_status=Ke,e.quiz_validMark="[*]",e.score_splitPattern="::",e.mktgForm=Ze,e}(t);var n={};t.gql_authorization&&(n.Authorization=t.gql_authorization);var a=new He.a({uri:t.gql_endpoint,headers:n}),r=Object(Qe.a)({seed:ne(8,"aA")});c.a.render(Object(z.jsx)(Ve.b,{generateClassName:r,children:Object(z.jsx)(gt,{jContent:t,children:Object(z.jsx)(Ye.a,{client:a,children:Object(z.jsx)("div",{style:{overflow:"hidden"},children:Object(z.jsx)(Be,{})})})})}),document.getElementById(e))}catch(i){console.error("error : ",i),c.a.render(Object(z.jsx)(Pe,{item:i.message,errors:i.errors}),document.getElementById(e))}},"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[181,1,2]]]);
//# sourceMappingURL=/modules/game-4-jcustomer-components-quiz/javascript/webapp/main.9dfa36a3.chunk.js.map
